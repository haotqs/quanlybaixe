<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n l√Ω B√£i Xe</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üöó H·ªá th·ªëng Qu·∫£n l√Ω B√£i Xe</h1>
        </header>

        <!-- Form th√™m xe -->
        <div class="form-section">
            <h2>Th√™m Xe V√†o B√£i</h2>
            <form id="vehicleForm">
                <div class="form-group">
                    <label for="licensePlate">Bi·ªÉn s·ªë xe *</label>
                    <input type="text" id="licensePlate" name="license_plate" required>
                </div>
                
                <div class="form-group">
                    <label for="vehicleType">Lo·∫°i xe</label>
                    <select id="vehicleType" name="vehicle_type">
                        <option value="">Ch·ªçn lo·∫°i xe</option>
                        <option value="Xe m√°y">Xe m√°y</option>
                        <option value="Xe ƒë·∫°p">Xe ƒë·∫°p</option>
                        <option value="√î t√¥">√î t√¥</option>
                        <option value="Xe 4 ch·ªó">Xe 4 ch·ªó</option>
                        <option value="Xe 7 ch·ªó">Xe 7 ch·ªó</option>
                        <option value="Xe 16 ch·ªó">Xe 16 ch·ªó</option>
                        <option value="Xe t·∫£i">Xe t·∫£i</option>
                        <option value="Xe kh√°ch">Xe kh√°ch</option>
                        <option value="Xe bu√Ωt">Xe bu√Ωt</option>
                        <option value="Xe container">Xe container</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="ownerName">T√™n ch·ªß xe</label>
                    <input type="text" id="ownerName" name="owner_name">
                </div>
                
                <div class="form-group">
                    <label for="phone">S·ªë ƒëi·ªán tho·∫°i</label>
                    <input type="tel" id="phone" name="phone">
                </div>
                
                <div class="form-group">
                    <label for="price">Gi√° ti·ªÅn (VNƒê)</label>
                    <input type="number" id="price" name="price" min="0">
                </div>
                
                <div class="form-group checkbox-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="monthlyParking" name="monthly_parking">
                        <span class="checkmark"></span>
                        G·ª≠i xe theo th√°ng
                    </label>
                    <small class="help-text">Tick v√†o ƒë√¢y n·∫øu xe g·ª≠i theo th√°ng</small>
                </div>
                
                                <button type="submit" id="submitBtn" class="btn btn-primary">Th√™m Xe</button>
                <button type="button" id="cancelBtn" class="btn btn-secondary" style="display: none;">H·ªßy</button>
            </form>
        </div>

        <!-- B·∫£ng xe g·ª≠i th√°ng -->
        <div class="table-section">
            <div class="table-header">
                <h2>üìÖ Xe G·ª≠i Th√°ng</h2>
                <div class="filter-section">
                    <input type="text" id="searchMonthlyInput" placeholder="T√¨m ki·∫øm xe g·ª≠i th√°ng...">
                    <select id="statusMonthlyFilter">
                        <option value="">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                        <option value="IN">Trong b√£i</option>
                        <option value="OUT">ƒê√£ ra</option>
                    </select>
                    <div class="excel-buttons">
                        <button class="btn btn-success" onclick="exportMonthlyToExcel()">
                            üì§ Export Excel (2 Sheets)
                        </button>
                        <button class="btn btn-primary" onclick="importFromExcel()">
                            üì• Import Excel
                        </button>
                        <button class="btn btn-danger" onclick="clearAllData()">
                            üóëÔ∏è X√≥a h·∫øt d·ªØ li·ªáu (Test)
                        </button>
                        <input type="file" id="excelFileInput" accept=".xlsx,.xls" style="display: none;">
                    </div>
                </div>
            </div>
            
            <div class="table-container">
                <table id="monthlyVehicleTable">
                    <thead>
                        <tr>
                            <th>STT</th>
                            <th>Bi·ªÉn s·ªë</th>
                            <th>Lo·∫°i xe</th>
                            <th>Ch·ªß xe</th>
                            <th>SDT</th>
                            <th>Ng√†y v√†o</th>
                            <th>Gi√° ti·ªÅn</th>
                            <th>Thanh to√°n</th>
                            <th>Thao t√°c</th>
                        </tr>
                    </thead>
                    <tbody id="monthlyVehicleTableBody">
                        <!-- D·ªØ li·ªáu xe g·ª≠i th√°ng -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- B·∫£ng xe g·ª≠i theo gi·ªù -->
        <div class="table-section">
            <div class="table-header">
                <h2>‚è∞ Xe G·ª≠i Theo Gi·ªù</h2>
                <div class="filter-section">
                    <input type="text" id="searchHourlyInput" placeholder="T√¨m ki·∫øm xe g·ª≠i theo gi·ªù...">
                    <select id="statusHourlyFilter">
                        <option value="">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                        <option value="IN">Trong b√£i</option>
                        <option value="OUT">ƒê√£ ra</option>
                    </select>
                </div>
            </div>
            
            <div class="table-container">
                <table id="hourlyVehicleTable">
                    <thead>
                        <tr>
                            <th>STT</th>
                            <th>Bi·ªÉn s·ªë</th>
                            <th>Lo·∫°i xe</th>
                            <th>Ch·ªß xe</th>
                            <th>SDT</th>
                            <th>Ng√†y v√†o</th>
                            <th>Gi√° ti·ªÅn</th>
                            <th>Thao t√°c</th>
                        </tr>
                    </thead>
                    <tbody id="hourlyVehicleTableBody">
                        <!-- D·ªØ li·ªáu xe g·ª≠i theo gi·ªù -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Modal x√°c nh·∫≠n -->
    <div id="confirmModal" class="modal">
        <div class="modal-content">
            <h3>X√°c nh·∫≠n</h3>
            <p id="confirmMessage"></p>
            <div class="modal-actions">
                <button id="confirmYes" class="btn btn-primary">C√≥</button>
                <button id="confirmNo" class="btn btn-secondary">Kh√¥ng</button>
            </div>
        </div>
    </div>

    <!-- Modal nh·∫≠p gi√° ti·ªÅn khi xe ra -->
    <!-- Modal xe ra b√£i cho xe theo gi·ªù -->
    <div id="exitModal" class="modal">
        <div class="modal-content">
            <h3>Xe Ra B√£i</h3>
            <div class="form-group">
                <label for="exitPrice">T·ªïng ti·ªÅn ph·∫£i thu (VNƒê) *</label>
                <input type="number" id="exitPrice" min="0" step="1000" required>
            </div>
            <div class="modal-actions">
                <button id="exitConfirm" class="btn btn-primary">X√°c nh·∫≠n</button>
                <button id="exitCancel" class="btn btn-secondary">H·ªßy</button>
            </div>
        </div>
    </div>

    <!-- Modal thanh to√°n xe g·ª≠i th√°ng -->
    <div id="paymentModal" class="modal">
        <div class="modal-content">
            <h3>üí∞ Thanh To√°n Xe G·ª≠i Th√°ng</h3>
            <div class="monthly-payment-grid">
                <div class="month-payment-item">
                    <h4>Th√°ng 1</h4>
                    <label class="checkbox-label">
                        <input type="checkbox" id="month1">
                        <span class="checkmark"></span>
                        ƒê√£ thanh to√°n
                    </label>
                    <input type="number" id="amount1" class="amount-input" placeholder="S·ªë ti·ªÅn" min="0">
                    <input type="date" id="date1" class="date-input" placeholder="Ng√†y thanh to√°n">
                </div>
                <div class="month-payment-item">
                    <h4>Th√°ng 2</h4>
                    <label class="checkbox-label">
                        <input type="checkbox" id="month2">
                        <span class="checkmark"></span>
                        ƒê√£ thanh to√°n
                    </label>
                    <input type="number" id="amount2" class="amount-input" placeholder="S·ªë ti·ªÅn" min="0">
                    <input type="date" id="date2" class="date-input" placeholder="Ng√†y thanh to√°n">
                </div>
                <div class="month-payment-item">
                    <h4>Th√°ng 3</h4>
                    <label class="checkbox-label">
                        <input type="checkbox" id="month3">
                        <span class="checkmark"></span>
                        ƒê√£ thanh to√°n
                    </label>
                    <input type="number" id="amount3" class="amount-input" placeholder="S·ªë ti·ªÅn" min="0">
                    <input type="date" id="date3" class="date-input" placeholder="Ng√†y thanh to√°n">
                </div>
                <div class="month-payment-item">
                    <h4>Th√°ng 4</h4>
                    <label class="checkbox-label">
                        <input type="checkbox" id="month4">
                        <span class="checkmark"></span>
                        ƒê√£ thanh to√°n
                    </label>
                    <input type="number" id="amount4" class="amount-input" placeholder="S·ªë ti·ªÅn" min="0">
                    <input type="date" id="date4" class="date-input" placeholder="Ng√†y thanh to√°n">
                </div>
                <div class="month-payment-item">
                    <h4>Th√°ng 5</h4>
                    <label class="checkbox-label">
                        <input type="checkbox" id="month5">
                        <span class="checkmark"></span>
                        ƒê√£ thanh to√°n
                    </label>
                    <input type="number" id="amount5" class="amount-input" placeholder="S·ªë ti·ªÅn" min="0">
                    <input type="date" id="date5" class="date-input" placeholder="Ng√†y thanh to√°n">
                </div>
                <div class="month-payment-item">
                    <h4>Th√°ng 6</h4>
                    <label class="checkbox-label">
                        <input type="checkbox" id="month6">
                        <span class="checkmark"></span>
                        ƒê√£ thanh to√°n
                    </label>
                    <input type="number" id="amount6" class="amount-input" placeholder="S·ªë ti·ªÅn" min="0">
                    <input type="date" id="date6" class="date-input" placeholder="Ng√†y thanh to√°n">
                </div>
                <div class="month-payment-item">
                    <h4>Th√°ng 7</h4>
                    <label class="checkbox-label">
                        <input type="checkbox" id="month7">
                        <span class="checkmark"></span>
                        ƒê√£ thanh to√°n
                    </label>
                    <input type="number" id="amount7" class="amount-input" placeholder="S·ªë ti·ªÅn" min="0">
                    <input type="date" id="date7" class="date-input" placeholder="Ng√†y thanh to√°n">
                </div>
                <div class="month-payment-item">
                    <h4>Th√°ng 8</h4>
                    <label class="checkbox-label">
                        <input type="checkbox" id="month8">
                        <span class="checkmark"></span>
                        ƒê√£ thanh to√°n
                    </label>
                    <input type="number" id="amount8" class="amount-input" placeholder="S·ªë ti·ªÅn" min="0">
                    <input type="date" id="date8" class="date-input" placeholder="Ng√†y thanh to√°n">
                </div>
                <div class="month-payment-item">
                    <h4>Th√°ng 9</h4>
                    <label class="checkbox-label">
                        <input type="checkbox" id="month9">
                        <span class="checkmark"></span>
                        ƒê√£ thanh to√°n
                    </label>
                    <input type="number" id="amount9" class="amount-input" placeholder="S·ªë ti·ªÅn" min="0">
                    <input type="date" id="date9" class="date-input" placeholder="Ng√†y thanh to√°n">
                </div>
                <div class="month-payment-item">
                    <h4>Th√°ng 10</h4>
                    <label class="checkbox-label">
                        <input type="checkbox" id="month10">
                        <span class="checkmark"></span>
                        ƒê√£ thanh to√°n
                    </label>
                    <input type="number" id="amount10" class="amount-input" placeholder="S·ªë ti·ªÅn" min="0">
                    <input type="date" id="date10" class="date-input" placeholder="Ng√†y thanh to√°n">
                </div>
                <div class="month-payment-item">
                    <h4>Th√°ng 11</h4>
                    <label class="checkbox-label">
                        <input type="checkbox" id="month11">
                        <span class="checkmark"></span>
                        ƒê√£ thanh to√°n
                    </label>
                    <input type="number" id="amount11" class="amount-input" placeholder="S·ªë ti·ªÅn" min="0">
                    <input type="date" id="date11" class="date-input" placeholder="Ng√†y thanh to√°n">
                </div>
                <div class="month-payment-item">
                    <h4>Th√°ng 12</h4>
                    <label class="checkbox-label">
                        <input type="checkbox" id="month12">
                        <span class="checkmark"></span>
                        ƒê√£ thanh to√°n
                    </label>
                    <input type="number" id="amount12" class="amount-input" placeholder="S·ªë ti·ªÅn" min="0">
                    <input type="date" id="date12" class="date-input" placeholder="Ng√†y thanh to√°n">
                </div>
            </div>
            <div class="modal-actions">
                <button id="paymentConfirm" class="btn btn-primary">üíæ L∆∞u thanh to√°n</button>
                <button id="paymentCancel" class="btn btn-secondary">H·ªßy</button>
            </div>
        </div>
    </div>

    <!-- Modal xem chi ti·∫øt thanh to√°n (ch·ªâ ƒë·ªçc) -->
    <div id="viewPaymentModal" class="modal">
        <div class="modal-content">
            <h3>üìã Chi Ti·∫øt Thanh To√°n</h3>
            <div id="paymentDetails" class="monthly-payment-grid">
                <!-- Payment details will be loaded here -->
            </div>
            <div class="modal-actions">
                <button id="viewPaymentClose" class="btn btn-secondary">ƒê√≥ng</button>
            </div>
        </div>
    </div>

    <!-- Modal s·ª≠a th√¥ng tin xe -->
    <div id="editVehicleModal" class="modal">
        <div class="modal-content">
            <h3>‚úèÔ∏è S·ª≠a Th√¥ng Tin Xe</h3>
            <form id="editVehicleForm">
                <!-- Row 1: Bi·ªÉn s·ªë v√† Lo·∫°i xe -->
                <div class="form-row">
                    <div class="form-group half-width">
                        <label for="editLicensePlate">Bi·ªÉn s·ªë xe *</label>
                        <input type="text" id="editLicensePlate" name="license_plate" required>
                    </div>
                    <div class="form-group half-width">
                        <label for="editVehicleType">Lo·∫°i xe</label>
                        <input type="text" id="editVehicleType" name="vehicle_type">
                    </div>
                </div>
                
                <!-- Row 2: T√™n ch·ªß xe v√† SDT -->
                <div class="form-row">
                    <div class="form-group half-width">
                        <label for="editOwnerName">T√™n ch·ªß xe *</label>
                        <input type="text" id="editOwnerName" name="owner_name" required>
                    </div>
                    <div class="form-group half-width">
                        <label for="editPhone">S·ªë ƒëi·ªán tho·∫°i</label>
                        <input type="tel" id="editPhone" name="phone">
                    </div>
                </div>
                
                <!-- Row 3: Gi√° ti·ªÅn v√† Checkbox -->
                <div class="form-row">
                    <div class="form-group half-width">
                        <label for="editPrice">Gi√° ti·ªÅn (VNƒê)</label>
                        <input type="number" id="editPrice" name="price" min="0">
                    </div>
                    <div class="form-group half-width checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="editMonthlyParking" name="monthly_parking">
                            <span class="checkmark"></span>
                            G·ª≠i xe theo th√°ng
                        </label>
                    </div>
                </div>
            </form>
            
            <div class="modal-actions">
                <button id="editVehicleSave" class="btn btn-primary">üíæ L∆∞u thay ƒë·ªïi</button>
                <button id="editVehicleCancel" class="btn btn-secondary">H·ªßy</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
